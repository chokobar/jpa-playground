<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ìƒí’ˆ ëª©ë¡</title>
  <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
  <style>
    body {
      background-color: #f8f9fa;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .card {
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      max-width: 1200px;
      width: 100%;
    }
    h3 {
      font-weight: bold;
      color: #343a40;
    }
    .table th {
      background-color: #f1f3f5;
    }
    .badge {
      font-size: 0.85rem;
    }
    .btn-custom {
      min-width: 120px;
    }
  </style>
</head>
<body>

<div class="container py-5">
  <div class="card mx-auto p-4 bg-white">
    <h3 class="text-center mb-4">ğŸ“¦ ìƒí’ˆ ëª©ë¡</h3>

    <form class="row g-2 mb-4" th:action="@{/product/listForm}" method="get">
      <div class="col-auto">
        <select class="form-select" name="category">
          <option th:value="ALL" th:selected="${selectedCategory == 'ALL'}">ì „ì²´</option>
          <option th:each="c : ${categories}"
                  th:value="${c.name()}"
                  th:text="${#strings.equals(c.name(),'ELECTRONICS') ? 'ì „ìì œí’ˆ' :
                            #strings.equals(c.name(),'BOOKS') ? 'ë„ì„œ' :
                            #strings.equals(c.name(),'FOOD') ? 'ì‹ë£Œí’ˆ' : 'ê¸°íƒ€'}"
                  th:selected="${selectedCategory == c.name()}">
          </option>
        </select>
      </div>

      <div class="col-auto">
        <select class="form-select" name="status">
          <option th:value="ALL" th:selected="${selectedStatus == 'ALL'}">ìƒíƒœ</option>
          <option th:each="s : ${statuses}"
                  th:value="${s.name()}"
                  th:text="${#strings.equals(s.name(),'AVAILABLE') ? 'íŒë§¤ì¤‘' :
                        #strings.equals(s.name(),'SOLD_OUT') ? 'í’ˆì ˆ' : 'ë‹¨ì¢…'}"
                  th:selected="${selectedStatus == s.name()}">
          </option>
        </select>
      </div>

      <div class="col-auto">
        <button type="submit" class="btn btn-outline-primary btn-custom">ê²€ìƒ‰</button>
      </div>
    </form>

    <div class="table-responsive">
      <table class="table table-hover align-middle text-center">
        <thead class="table-light">
        <tr>
          <th>ë²ˆí˜¸</th>
          <th>ìƒí’ˆëª…</th>
          <th>ì„¤ëª…</th>
          <th>ê°€ê²©</th>
          <th>ì¬ê³ </th>
          <th>ìƒíƒœ</th>
          <th>ì¹´í…Œê³ ë¦¬</th>
          <th>ë“±ë¡ì¼</th>
          <th>ìˆ˜ì •ì¼</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="product, stat : ${products}">
          <td th:text="${stat.count}"></td>
          <td>
            <a class="fw-bold text-decoration-none text-primary"
               th:href="@{/product/{id}(id=${product.id})}"
               th:text="${product.name}">ìƒí’ˆëª…</a>
          </td>
          <td th:text="${product.description}">ìƒí’ˆì„¤ëª…</td>
          <td th:text="${#numbers.formatInteger(product.price, 3, 'COMMA') + ' ì›'}">10000</td>
          <td th:text="${product.stockQuantity}">10</td>
          <td>
            <span th:switch="${product.status.name()}">
              <span th:case="'AVAILABLE'" class="badge bg-success">íŒ&nbsp;ë§¤&nbsp;ì¤‘</span>
              <span th:case="'SOLD_OUT'" class="badge bg-danger">í’ˆ&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ì ˆ</span>
              <span th:case="'DISCONTINUED'" class="badge bg-secondary">ë‹¨&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ì¢…</span>
            </span>
          </td>
          <td>
            <span th:switch="${product.category.name()}">
              <span th:case="'ELECTRONICS'" class="badge bg-info text-dark">ì „ìì œí’ˆ</span>
              <span th:case="'BOOKS'" class="badge bg-warning text-dark">ë„&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ì„œ</span>
              <span th:case="'FOOD'" class="badge bg-success">ì‹&nbsp;ë£Œ&nbsp;í’ˆ</span>
              <span th:case="'ETC'" class="badge bg-dark">ê¸°&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;íƒ€</span>
            </span>
          </td>
          <td th:text="${product.createdAt}"></td>
          <td th:text="${#strings.isEmpty(product.updatedAt) or product.updatedAt == 'null' ? '-' : product.updatedAt}"></td>
        </tr>
        <tr th:if="${#lists.isEmpty(products)}">
          <td colspan="9" class="text-muted py-3">ë“±ë¡ëœ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</td>
        </tr>
        </tbody>
      </table>
    </div>

    <div class="d-flex justify-content-between mt-4">
      <a class="btn btn-outline-secondary btn-custom" th:href="@{/}">ë©”ì¸í™”ë©´</a>
      <a class="btn btn-success btn-custom" th:href="@{/product/productForm}">ìƒí’ˆ ë“±ë¡</a>
    </div>
  </div>
</div>

</body>
</html>
